<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tailwind to Nordcraft JSON Converter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* gray-900 */
        }
        .font-mono {
            font-family: 'Fira Code', monospace;
        }
        /* Custom scrollbar for webkit browsers */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; /* gray-800 */
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; /* gray-600 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* gray-500 */
        }
    </style>
</head>
<body class="text-gray-200">

    <div class="flex flex-col h-screen">
        <header class="bg-gray-900/80 backdrop-blur-sm border-b border-gray-700/50 p-4 shadow-lg z-10">
            <div class="max-w-7xl mx-auto flex justify-between items-center">
                <h1 class="text-xl font-bold text-white">Tailwind to Nordcraft JSON Converter</h1>
                <div class="flex items-center gap-4">
                     <a href="https://github.com/google/labs-prototypes" target="_blank" class="text-gray-400 hover:text-white transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35.0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/></svg>
                    </a>
                </div>
            </div>
        </header>

        <main class="flex-grow grid grid-cols-1 md:grid-cols-2 gap-4 p-4 overflow-hidden">
            <div class="flex flex-col bg-gray-900 rounded-lg border border-gray-700/50 overflow-hidden">
                <div class="flex justify-between items-center p-3 bg-gray-800/70 border-b border-gray-700/50">
                    <h2 class="font-semibold text-white">Tailwind HTML Input</h2>
                    <div class="flex gap-2">
                        <button id="paste-from-clipboard-btn" class="text-sm bg-purple-600 hover:bg-purple-500 text-white font-semibold py-1 px-3 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-purple-400">Paste Code</button>
                        <button id="paste-sample-btn" class="text-sm bg-indigo-600 hover:bg-indigo-500 text-white font-semibold py-1 px-3 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400">Paste Sample</button>
                    </div>
                </div>
                <div class="flex-grow relative">
                    <textarea id="html-input" class="w-full h-full p-4 bg-transparent resize-none focus:outline-none font-mono text-sm leading-relaxed" placeholder="Paste your HTML with Tailwind classes here..."></textarea>
                </div>
            </div>

            <div class="flex flex-col bg-gray-900 rounded-lg border border-gray-700/50 overflow-hidden">
                <div class="flex justify-between items-center p-3 bg-gray-800/70 border-b border-gray-700/50">
                    <h2 class="font-semibold text-white">Nordcraft JSON Output</h2>
                    <button id="copy-btn" class="text-sm bg-emerald-600 hover:bg-emerald-500 text-white font-semibold py-1 px-3 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-400">Copy JSON</button>
                </div>
                <div class="flex-grow relative">
                    <pre id="json-output-container" class="w-full h-full overflow-auto"><code id="json-output" class="language-json p-4 block font-mono text-sm"></code></pre>
                    <div id="output-placeholder" class="absolute inset-0 flex items-center justify-center text-gray-500">
                        JSON output will appear here...
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="p-4 flex justify-center">
             <button id="convert-btn" class="w-full md:w-1/2 lg:w-1/3 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-400/50">
                Convert to Nordcraft JSON
            </button>
        </footer>
    </div>
    
    <div id="toast" class="fixed bottom-5 right-5 bg-gray-800 text-white py-2 px-5 rounded-lg shadow-xl text-sm transition-opacity duration-300 opacity-0">
        <span id="toast-message"></span>
    </div>

    <script type="module">
        // --- Tailwind Map Generation ---
        
        const colors = {
            slate: { 50: '#f8fafc', 100: '#f1f5f9', 200: '#e2e8f0', 300: '#cbd5e1', 400: '#94a3b8', 500: '#64748b', 600: '#475569', 700: '#334155', 800: '#1e293b', 900: '#0f172a', 950: '#020617' },
            gray: { 50: '#f9fafb', 100: '#f3f4f6', 200: '#e5e7eb', 300: '#d1d5db', 400: '#9ca3af', 500: '#6b7280', 600: '#4b5563', 700: '#374151', 800: '#1f2937', 900: '#111827', 950: '#030712' },
            zinc: { 50: '#fafafa', 100: '#f4f4f5', 200: '#e4e4e7', 300: '#d4d4d8', 400: '#a1a1aa', 500: '#71717a', 600: '#52525b', 700: '#3f3f46', 800: '#27272a', 900: '#18181b', 950: '#09090b' },
            neutral: { 50: '#fafafa', 100: '#f5f5f5', 200: '#e5e5e5', 300: '#d4d4d4', 400: '#a3a3a3', 500: '#737373', 600: '#525252', 700: '#404040', 800: '#262626', 900: '#171717', 950: '#0a0a0a' },
            stone: { 50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1', 400: '#a8a29e', 500: '#78716c', 600: '#57534e', 700: '#44403c', 800: '#292524', 900: '#1c1917', 950: '#0c0a09' },
            red: { 50: '#fef2f2', 100: '#fee2e2', 200: '#fecaca', 300: '#fca5a5', 400: '#f87171', 500: '#ef4444', 600: '#dc2626', 700: '#b91c1c', 800: '#991b1b', 900: '#7f1d1d', 950: '#450a0a' },
            orange: { 50: '#fff7ed', 100: '#ffedd5', 200: '#fed7aa', 300: '#fdba74', 400: '#fb923c', 500: '#f97316', 600: '#ea580c', 700: '#c2410c', 800: '#9a3412', 900: '#7c2d12', 950: '#431407' },
            amber: { 50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309', 800: '#92400e', 900: '#78350f', 950: '#451a03' },
            yellow: { 50: '#fefce8', 100: '#fef9c3', 200: '#fef08a', 300: '#fde047', 400: '#facc15', 500: '#eab308', 600: '#ca8a04', 700: '#a16207', 800: '#854d0e', 900: '#713f12', 950: '#422006' },
            lime: { 50: '#f7fee7', 100: '#ecfccb', 200: '#d9f99d', 300: '#bef264', 400: '#a3e635', 500: '#84cc16', 600: '#65a30d', 700: '#4d7c0f', 800: '#3f6212', 900: '#365314', 950: '#1a2e05' },
            green: { 50: '#f0fdf4', 100: '#dcfce7', 200: '#bbf7d0', 300: '#86efac', 400: '#4ade80', 500: '#22c55e', 600: '#16a34a', 700: '#15803d', 800: '#166534', 900: '#14532d', 950: '#052e16' },
            emerald: { 50: '#ecfdf5', 100: '#d1fae5', 200: '#a7f3d0', 300: '#6ee7b7', 400: '#34d399', 500: '#10b981', 600: '#059669', 700: '#047857', 800: '#065f46', 900: '#064e3b', 950: '#022c22' },
            teal: { 50: '#f0fdfa', 100: '#ccfbf1', 200: '#99f6e4', 300: '#5eead4', 400: '#2dd4bf', 500: '#14b8a6', 600: '#0d9488', 700: '#0f766e', 800: '#115e59', 900: '#134e4a', 950: '#042f2e' },
            cyan: { 50: '#ecfeff', 100: '#cffafe', 200: '#a5f3fc', 300: '#67e8f9', 400: '#22d3ee', 500: '#06b6d4', 600: '#0891b2', 700: '#0e7490', 800: '#155e75', 900: '#164e63', 950: '#083344' },
            sky: { 50: '#f0f9ff', 100: '#e0f2fe', 200: '#bae6fd', 300: '#7dd3fc', 400: '#38bdf8', 500: '#0ea5e9', 600: '#0284c7', 700: '#0369a1', 800: '#075985', 900: '#0c4a6e', 950: '#082f49' },
            blue: { 50: '#eff6ff', 100: '#dbeafe', 200: '#bfdbfe', 300: '#93c5fd', 400: '#60a5fa', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8', 800: '#1e40af', 900: '#1e3a8a', 950: '#172554' },
            indigo: { 50: '#eef2ff', 100: '#e0e7ff', 200: '#c7d2fe', 300: '#a5b4fc', 400: '#818cf8', 500: '#6366f1', 600: '#4f46e5', 700: '#4338ca', 800: '#3730a3', 900: '#312e81', 950: '#1e1b4b' },
            violet: { 50: '#f5f3ff', 100: '#ede9fe', 200: '#ddd6fe', 300: '#c4b5fd', 400: '#a78bfa', 500: '#8b5cf6', 600: '#7c3aed', 700: '#6d28d9', 800: '#5b21b6', 900: '#4c1d95', 950: '#2e1065' },
            purple: { 50: '#faf5ff', 100: '#f3e8ff', 200: '#e9d5ff', 300: '#d8b4fe', 400: '#c084fc', 500: '#a855f7', 600: '#9333ea', 700: '#7e22ce', 800: '#6b21a8', 900: '#581c87', 950: '#3b0764' },
            fuchsia: { 50: '#fdf4ff', 100: '#fae8ff', 200: '#f5d0fe', 300: '#f0abfc', 400: '#e879f9', 500: '#d946ef', 600: '#c026d3', 700: '#a21caf', 800: '#86198f', 900: '#701a75', 950: '#4a044e' },
            pink: { 50: '#fdf2f8', 100: '#fce7f3', 200: '#fbcfe8', 300: '#f9a8d4', 400: '#f472b6', 500: '#ec4899', 600: '#db2777', 700: '#be185d', 800: '#9d174d', 900: '#831843', 950: '#500724' },
            rose: { 50: '#fff1f2', 100: '#ffe4e6', 200: '#fecdd3', 300: '#fda4af', 400: '#fb7185', 500: '#f43f5e', 600: '#e11d48', 700: '#be123c', 800: '#9f1239', 900: '#881337', 950: '#4c0519' },
        };

        const generatedColorUtilities = {};
        const colorProps = {
            'bg': 'background-color', 'text': 'color', 'border': 'border-color',
            'ring': '--tw-ring-color', 'ring-offset': '--tw-ring-offset-color',
            'accent': 'accent-color', 'caret': 'caret-color', 'fill': 'fill', 'stroke': 'stroke',
            'decoration': 'text-decoration-color',
            'from': '--tw-gradient-from', 'via': '--tw-gradient-stops', 'to': '--tw-gradient-to',
        };
        for (const colorName in colors) {
            for (const shade in colors[colorName]) {
                const hex = colors[colorName][shade];
                for (const propPrefix in colorProps) {
                    const cssProp = colorProps[propPrefix];
                    generatedColorUtilities[`${propPrefix}-${colorName}-${shade}`] = { [cssProp]: hex };
                }
            }
        }
        
        const spacingScale = { '0': '0px', 'px': '1px', '0.5': '0.125rem', '1': '0.25rem', '1.5': '0.375rem', '2': '0.5rem', '2.5': '0.625rem', '3': '0.75rem', '3.5': '0.875rem', '4': '1rem', '5': '1.25rem', '6': '1.5rem', '7': '1.75rem', '8': '2rem', '9': '2.25rem', '10': '2.5rem', '11': '2.75rem', '12': '3rem', '14': '3.5rem', '16': '4rem', '20': '5rem', '24': '6rem', '28': '7rem', '32': '8rem', '36': '9rem', '40': '10rem', '44': '11rem', '48': '12rem', '52': '13rem', '56': '14rem', '60': '15rem', '64': '16rem', '72': '18rem', '80': '20rem', '96': '24rem' };
        
        const genSpacing = (prefix, prop) => Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`${prefix}-${k}`, { [prop]: v }]));
        const genXYSpacing = (prefix, propX, propY) => Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`${prefix}-${k}`, { [propX]: v, [propY]: v }]));
        const genNegativeMargin = (prefix, prop) => Object.fromEntries(Object.entries(spacingScale).filter(([k,v]) => v!=='0px').map(([k, v]) => [`-${prefix}-${k}`, { [prop]: `-${v}` }]));
        
        const tailwindMap = {
            ...generatedColorUtilities,

            // --- Accessibility ---
            'sr-only': { position: 'absolute', width: '1px', height: '1px', padding: '0', margin: '-1px', overflow: 'hidden', clip: 'rect(0, 0, 0, 0)', 'white-space': 'nowrap', 'border-width': '0' },

            // --- Layout ---
            'box-decoration-slice': { 'box-decoration-break': 'slice' }, 'box-decoration-clone': { 'box-decoration-break': 'clone' },
            'box-border': { 'box-sizing': 'border-box' }, 'box-content': { 'box-sizing': 'content-box' },
            'block': { 'display': 'block' }, 'inline-block': { 'display': 'inline-block' }, 'inline': { 'display': 'inline' }, 'flex': { 'display': 'flex' }, 'inline-flex': { 'display': 'inline-flex' }, 'table': { 'display': 'table' }, 'inline-table': { 'display': 'inline-table' }, 'table-caption': { 'display': 'table-caption' }, 'table-cell': { 'display': 'table-cell' }, 'table-column': { 'display': 'table-column' }, 'table-column-group': { 'display': 'table-column-group' }, 'table-footer-group': { 'display': 'table-footer-group' }, 'table-header-group': { 'display': 'table-header-group' }, 'table-row-group': { 'display': 'table-row-group' }, 'table-row': { 'display': 'table-row' }, 'flow-root': { 'display': 'flow-root' }, 'grid': { 'display': 'grid' }, 'inline-grid': { 'display': 'inline-grid' }, 'contents': { 'display': 'contents' }, 'list-item': { 'display': 'list-item' }, 'hidden': { 'display': 'none' },
            'aspect-auto': { 'aspect-ratio': 'auto' }, 'aspect-square': { 'aspect-ratio': '1 / 1' }, 'aspect-video': { 'aspect-ratio': '16 / 9' },
            ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`inset-${k}`, { inset: v }])), ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`inset-x-${k}`, { left: v, right: v }])), ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`inset-y-${k}`, { top: v, bottom: v }])), ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`top-${k}`, { top: v }])), ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`bottom-${k}`, { bottom: v }])), ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`left-${k}`, { left: v }])), ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`right-${k}`, { right: v }])),
            'float-right': { 'float': 'right' }, 'float-left': { 'float': 'left' }, 'float-none': { 'float': 'none' }, 'clear-left': { 'clear': 'left' }, 'clear-right': { 'clear': 'right' }, 'clear-both': { 'clear': 'both' }, 'clear-none': { 'clear': 'none' },
            'isolate': { 'isolation': 'isolate' }, 'isolation-auto': { 'isolation': 'auto' },
            'object-contain': { 'object-fit': 'contain' }, 'object-cover': { 'object-fit': 'cover' }, 'object-fill': { 'object-fit': 'fill' }, 'object-none': { 'object-fit': 'none' }, 'object-scale-down': { 'object-fit': 'scale-down' }, 'object-bottom': { 'object-position': 'bottom' }, 'object-center': { 'object-position': 'center' }, 'object-left': { 'object-position': 'left' }, 'object-left-bottom': { 'object-position': 'left bottom' }, 'object-left-top': { 'object-position': 'left top' }, 'object-right': { 'object-position': 'right' }, 'object-right-bottom': { 'object-position': 'right bottom' }, 'object-right-top': { 'object-position': 'right top' }, 'object-top': { 'object-position': 'top' },
            'overflow-auto': { 'overflow': 'auto' }, 'overflow-hidden': { 'overflow': 'hidden' }, 'overflow-clip': { 'overflow': 'clip' }, 'overflow-visible': { 'overflow': 'visible' }, 'overflow-scroll': { 'overflow': 'scroll' }, 'overflow-x-auto': { 'overflow-x': 'auto' }, 'overflow-y-auto': { 'overflow-y': 'auto' }, 'overflow-x-hidden': { 'overflow-x': 'hidden' }, 'overflow-y-hidden': { 'overflow-y': 'hidden' }, 'overflow-x-clip': { 'overflow-x': 'clip' }, 'overflow-y-clip': { 'overflow-y': 'clip' }, 'overflow-x-visible': { 'overflow-x': 'visible' }, 'overflow-y-visible': { 'overflow-y': 'visible' }, 'overflow-x-scroll': { 'overflow-x': 'scroll' }, 'overflow-y-scroll': { 'overflow-y': 'scroll' },
            'overscroll-auto': { 'overscroll-behavior': 'auto' }, 'overscroll-contain': { 'overscroll-behavior': 'contain' }, 'overscroll-none': { 'overscroll-behavior': 'none' }, 'overscroll-y-auto': { 'overscroll-behavior-y': 'auto' }, 'overscroll-y-contain': { 'overscroll-behavior-y': 'contain' }, 'overscroll-y-none': { 'overscroll-behavior-y': 'none' }, 'overscroll-x-auto': { 'overscroll-behavior-x': 'auto' }, 'overscroll-x-contain': { 'overscroll-behavior-x': 'contain' }, 'overscroll-x-none': { 'overscroll-behavior-x': 'none' },
            'static': { 'position': 'static' }, 'fixed': { 'position': 'fixed' }, 'absolute': { 'position': 'absolute' }, 'relative': { 'position': 'relative' }, 'sticky': { 'position': 'sticky' },
            'visible': { 'visibility': 'visible' }, 'invisible': { 'visibility': 'hidden' }, 'collapse': { 'visibility': 'collapse' },
            ...Object.fromEntries([0, 10, 20, 30, 40, 50].map(i => [`z-${i}`, { 'z-index': i }])), 'z-auto': { 'z-index': 'auto' },

            // --- Flexbox & Grid ---
            ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`basis-${k}`, { 'flex-basis': v }])), 'basis-auto': { 'flex-basis': 'auto' }, 'basis-full': { 'flex-basis': '100%' },
            'flex-row': { 'flex-direction': 'row' }, 'flex-row-reverse': { 'flex-direction': 'row-reverse' }, 'flex-col': { 'flex-direction': 'column' }, 'flex-col-reverse': { 'flex-direction': 'column-reverse' },
            'flex-wrap': { 'flex-wrap': 'wrap' }, 'flex-wrap-reverse': { 'flex-wrap': 'wrap-reverse' }, 'flex-nowrap': { 'flex-wrap': 'nowrap' },
            'flex-1': { 'flex': '1 1 0%' }, 'flex-auto': { 'flex': '1 1 auto' }, 'flex-initial': { 'flex': '0 1 auto' }, 'flex-none': { 'flex': 'none' },
            'grow': { 'flex-grow': '1' }, 'grow-0': { 'flex-grow': '0' }, 'shrink': { 'flex-shrink': '1' }, 'shrink-0': { 'flex-shrink': '0' },
            ...Object.fromEntries(Array.from({ length: 13 }, (_, i) => [`order-${i}`, { 'order': `${i}` }])), 'order-first': { 'order': '-9999' }, 'order-last': { 'order': '9999' }, 'order-none': { 'order': '0' },
            ...Object.fromEntries(Array.from({ length: 13 }, (_, i) => i > 0 ? [`grid-cols-${i}`, { 'grid-template-columns': `repeat(${i}, minmax(0, 1fr))` }] : [])), 'grid-cols-none': { 'grid-template-columns': 'none' },
            ...Object.fromEntries(Array.from({ length: 13 }, (_, i) => i > 0 ? [`col-span-${i}`, { 'grid-column': `span ${i} / span ${i}` }] : [])), 'col-span-full': { 'grid-column': '1 / -1' }, ...Object.fromEntries(Array.from({ length: 14 }, (_, i) => i > 0 ? [`col-start-${i}`, { 'grid-column-start': i }] : [])), 'col-start-auto': { 'grid-column-start': 'auto' }, ...Object.fromEntries(Array.from({ length: 14 }, (_, i) => i > 0 ? [`col-end-${i}`, { 'grid-column-end': i }] : [])), 'col-end-auto': { 'grid-column-end': 'auto' },
            ...Object.fromEntries(Array.from({ length: 13 }, (_, i) => i > 0 ? [`grid-rows-${i}`, { 'grid-template-rows': `repeat(${i}, minmax(0, 1fr))` }] : [])), 'grid-rows-none': { 'grid-template-rows': 'none' },
            ...Object.fromEntries(Array.from({ length: 13 }, (_, i) => i > 0 ? [`row-span-${i}`, { 'grid-row': `span ${i} / span ${i}` }] : [])), 'row-span-full': { 'grid-row': '1 / -1' }, ...Object.fromEntries(Array.from({ length: 14 }, (_, i) => i > 0 ? [`row-start-${i}`, { 'grid-row-start': i }] : [])), 'row-start-auto': { 'grid-row-start': 'auto' }, ...Object.fromEntries(Array.from({ length: 14 }, (_, i) => i > 0 ? [`row-end-${i}`, { 'grid-row-end': i }] : [])), 'row-end-auto': { 'grid-row-end': 'auto' },
            'grid-flow-row': { 'grid-auto-flow': 'row' }, 'grid-flow-col': { 'grid-auto-flow': 'column' }, 'grid-flow-dense': { 'grid-auto-flow': 'dense' }, 'grid-flow-row-dense': { 'grid-auto-flow': 'row dense' }, 'grid-flow-col-dense': { 'grid-auto-flow': 'column dense' },
            'auto-cols-auto': { 'grid-auto-columns': 'auto' }, 'auto-cols-min': { 'grid-auto-columns': 'min-content' }, 'auto-cols-max': { 'grid-auto-columns': 'max-content' }, 'auto-cols-fr': { 'grid-auto-columns': 'minmax(0, 1fr)' },
            'auto-rows-auto': { 'grid-auto-rows': 'auto' }, 'auto-rows-min': { 'grid-auto-rows': 'min-content' }, 'auto-rows-max': { 'grid-auto-rows': 'max-content' }, 'auto-rows-fr': { 'grid-auto-rows': 'minmax(0, 1fr)' },
            ...genSpacing('gap', 'gap'), ...genSpacing('gap-x', 'column-gap'), ...genSpacing('gap-y', 'row-gap'),
            'justify-normal': {'justify-content': 'normal'}, 'justify-start': { 'justify-content': 'flex-start' }, 'justify-end': { 'justify-content': 'flex-end' }, 'justify-center': { 'justify-content': 'center' }, 'justify-between': { 'justify-content': 'space-between' }, 'justify-around': { 'justify-content': 'space-around' }, 'justify-evenly': { 'justify-content': 'space-evenly' }, 'justify-stretch': { 'justify-content': 'stretch' },
            'justify-items-start': { 'justify-items': 'start' }, 'justify-items-end': { 'justify-items': 'end' }, 'justify-items-center': { 'justify-items': 'center' }, 'justify-items-stretch': { 'justify-items': 'stretch' },
            'justify-self-auto': { 'justify-self': 'auto' }, 'justify-self-start': { 'justify-self': 'start' }, 'justify-self-end': { 'justify-self': 'end' }, 'justify-self-center': { 'justify-self': 'center' }, 'justify-self-stretch': { 'justify-self': 'stretch' },
            'content-normal': {'align-content': 'normal'}, 'content-center': { 'align-content': 'center' }, 'content-start': { 'align-content': 'flex-start' }, 'content-end': { 'align-content': 'flex-end' }, 'content-between': { 'align-content': 'space-between' }, 'content-around': { 'align-content': 'space-around' }, 'content-evenly': { 'align-content': 'space-evenly' }, 'content-baseline': {'align-content': 'baseline'}, 'content-stretch': {'align-content': 'stretch'},
            'items-start': { 'align-items': 'flex-start' }, 'items-end': { 'align-items': 'flex-end' }, 'items-center': { 'align-items': 'center' }, 'items-baseline': { 'align-items': 'baseline' }, 'items-stretch': { 'align-items': 'stretch' },
            'self-auto': { 'align-self': 'auto' }, 'self-start': { 'align-self': 'flex-start' }, 'self-end': { 'align-self': 'flex-end' }, 'self-center': { 'align-self': 'center' }, 'self-stretch': { 'align-self': 'stretch' }, 'self-baseline': { 'align-self': 'baseline' },
            'place-content-center': { 'place-content': 'center' }, 'place-content-start': { 'place-content': 'start' }, 'place-content-end': { 'place-content': 'end' }, 'place-content-between': { 'place-content': 'space-between' }, 'place-content-around': { 'place-content': 'space-around' }, 'place-content-evenly': { 'place-content': 'space-evenly' }, 'place-content-baseline': {'place-content': 'baseline'}, 'place-content-stretch': { 'place-content': 'stretch' },
            'place-items-start': { 'place-items': 'start' }, 'place-items-end': { 'place-items': 'end' }, 'place-items-center': { 'place-items': 'center' }, 'place-items-stretch': { 'place-items': 'stretch' },
            'place-self-auto': { 'place-self': 'auto' }, 'place-self-start': { 'place-self': 'start' }, 'place-self-end': { 'place-self': 'end' }, 'place-self-center': { 'place-self': 'center' }, 'place-self-stretch': { 'place-self': 'stretch' },

            // --- Spacing ---
            ...genSpacing('p', 'padding'), ...genXYSpacing('px', 'padding-left', 'padding-right'), ...genXYSpacing('py', 'padding-top', 'padding-bottom'), ...genSpacing('pt', 'padding-top'), ...genSpacing('pr', 'padding-right'), ...genSpacing('pb', 'padding-bottom'), ...genSpacing('pl', 'padding-left'),
            ...genSpacing('m', 'margin'), ...genXYSpacing('mx', 'margin-left', 'margin-right'), ...genXYSpacing('my', 'margin-top', 'margin-bottom'), ...genSpacing('mt', 'margin-top'), ...genSpacing('mr', 'margin-right'), ...genSpacing('mb', 'margin-bottom'), ...genSpacing('ml', 'margin-left'),
            ...genNegativeMargin('m', 'margin'), ...genNegativeMargin('mx', 'margin-left', 'margin-right'), ...genNegativeMargin('my', 'margin-top', 'margin-bottom'), ...genNegativeMargin('mt', 'margin-top'), ...genNegativeMargin('mr', 'margin-right'), ...genNegativeMargin('mb', 'margin-bottom'), ...genNegativeMargin('ml', 'margin-left'),
            'mx-auto': { 'margin-left': 'auto', 'margin-right': 'auto' },

            // --- Sizing ---
            ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`w-${k}`, { width: v }])), 'w-auto': { 'width': 'auto' }, 'w-1/2': { 'width': '50%' }, 'w-1/3': { 'width': '33.333333%' }, 'w-2/3': { 'width': '66.666667%' }, 'w-1/4': { 'width': '25%' }, 'w-2/4': { 'width': '50%' }, 'w-3/4': { 'width': '75%' }, 'w-1/5': { 'width': '20%' }, 'w-2/5': { 'width': '40%' }, 'w-3/5': { 'width': '60%' }, 'w-4/5': { 'width': '80%' }, 'w-1/6': { 'width': '16.666667%' }, 'w-5/6': { 'width': '83.333333%' }, 'w-full': { 'width': '100%' }, 'w-screen': { 'width': '100vw' }, 'w-min': { 'width': 'min-content' }, 'w-max': { 'width': 'max-content' }, 'w-fit': { 'width': 'fit-content' },
            'min-w-0': { 'min-width': '0px' }, 'min-w-full': { 'min-width': '100%' }, 'min-w-min': { 'min-width': 'min-content' }, 'min-w-max': { 'min-width': 'max-content' }, 'min-w-fit': { 'min-width': 'fit-content' },
            'max-w-0': { 'max-width': '0rem' }, 'max-w-none': { 'max-width': 'none' }, 'max-w-xs': { 'max-width': '20rem' }, 'max-w-sm': { 'max-width': '24rem' }, 'max-w-md': { 'max-width': '28rem' }, 'max-w-lg': { 'max-width': '32rem' }, 'max-w-xl': { 'max-width': '36rem' }, 'max-w-2xl': { 'max-width': '42rem' }, 'max-w-3xl': { 'max-width': '48rem' }, 'max-w-4xl': { 'max-width': '56rem' }, 'max-w-5xl': { 'max-width': '64rem' }, 'max-w-6xl': { 'max-width': '72rem' }, 'max-w-7xl': { 'max-width': '80rem' }, 'max-w-full': { 'max-width': '100%' }, 'max-w-min': { 'max-width': 'min-content' }, 'max-w-max': { 'max-width': 'max-content' }, 'max-w-fit': { 'max-width': 'fit-content' }, 'max-w-prose': { 'max-width': '65ch' },
            ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`h-${k}`, { height: v }])), 'h-auto': { 'height': 'auto' }, 'h-1/2': { 'height': '50%' }, 'h-1/3': { 'height': '33.333333%' }, 'h-2/3': { 'height': '66.666667%' }, 'h-1/4': { 'height': '25%' }, 'h-2/4': { 'height': '50%' }, 'h-3/4': { 'height': '75%' }, 'h-1/5': { 'height': '20%' }, 'h-2/5': { 'height': '40%' }, 'h-3/5': { 'height': '60%' }, 'h-4/5': { 'height': '80%' }, 'h-1/6': { 'height': '16.666667%' }, 'h-5/6': { 'height': '83.333333%' }, 'h-full': { 'height': '100%' }, 'h-screen': { 'height': '100vh' }, 'h-min': { 'height': 'min-content' }, 'h-max': { 'height': 'max-content' }, 'h-fit': { 'height': 'fit-content' },
            'min-h-0': { 'min-height': '0px' }, 'min-h-full': { 'min-height': '100%' }, 'min-h-screen': { 'min-height': '100vh' }, 'min-h-min': { 'min-height': 'min-content' }, 'min-h-max': { 'min-height': 'max-content' }, 'min-h-fit': { 'min-height': 'fit-content' },
            'max-h-0': { 'max-height': '0px' }, ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`max-h-${k}`, { 'max-height': v }])), 'max-h-full': { 'max-height': '100%' }, 'max-h-screen': { 'max-height': '100vh' }, 'max-h-min': { 'max-height': 'min-content' }, 'max-h-max': { 'max-height': 'max-content' }, 'max-h-fit': { 'max-height': 'fit-content' },
            ...Object.fromEntries(Object.entries(spacingScale).map(([k, v]) => [`size-${k}`, { width: v, height: v }])),
            
            // --- Typography ---
            'font-sans': { 'font-family': 'ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"' }, 'font-serif': { 'font-family': 'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif' }, 'font-mono': { 'font-family': 'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace' },
            'text-xs': { 'font-size': '0.75rem', 'line-height': '1rem' }, 'text-sm': { 'font-size': '0.875rem', 'line-height': '1.25rem' }, 'text-base': { 'font-size': '1rem', 'line-height': '1.5rem' }, 'text-lg': { 'font-size': '1.125rem', 'line-height': '1.75rem' }, 'text-xl': { 'font-size': '1.25rem', 'line-height': '1.75rem' }, 'text-2xl': { 'font-size': '1.5rem', 'line-height': '2rem' }, 'text-3xl': { 'font-size': '1.875rem', 'line-height': '2.25rem' }, 'text-4xl': { 'font-size': '2.25rem', 'line-height': '2.5rem' }, 'text-5xl': { 'font-size': '3rem', 'line-height': '1' }, 'text-6xl': { 'font-size': '3.75rem', 'line-height': '1' }, 'text-7xl': { 'font-size': '4.5rem', 'line-height': '1' }, 'text-8xl': { 'font-size': '6rem', 'line-height': '1' }, 'text-9xl': { 'font-size': '8rem', 'line-height': '1' },
            'antialiased': { '-webkit-font-smoothing': 'antialiased', '-moz-osx-font-smoothing': 'grayscale' }, 'subpixel-antialiased': { '-webkit-font-smoothing': 'auto', '-moz-osx-font-smoothing': 'auto' },
            'italic': { 'font-style': 'italic' }, 'not-italic': { 'font-style': 'normal' },
            'font-thin': { 'font-weight': '100' }, 'font-extralight': { 'font-weight': '200' }, 'font-light': { 'font-weight': '300' }, 'font-normal': { 'font-weight': '400' }, 'font-medium': { 'font-weight': '500' }, 'font-semibold': { 'font-weight': '600' }, 'font-bold': { 'font-weight': '700' }, 'font-extrabold': { 'font-weight': '800' }, 'font-black': { 'font-weight': '900' },
            'tracking-tighter': { 'letter-spacing': '-0.05em' }, 'tracking-tight': { 'letter-spacing': '-0.025em' }, 'tracking-normal': { 'letter-spacing': '0em' }, 'tracking-wide': { 'letter-spacing': '0.025em' }, 'tracking-wider': { 'letter-spacing': '0.05em' }, 'tracking-widest': { 'letter-spacing': '0.1em' },
            'leading-3': { 'line-height': '.75rem' }, 'leading-4': { 'line-height': '1rem' }, 'leading-5': { 'line-height': '1.25rem' }, 'leading-6': { 'line-height': '1.5rem' }, 'leading-7': { 'line-height': '1.75rem' }, 'leading-8': { 'line-height': '2rem' }, 'leading-9': { 'line-height': '2.25rem' }, 'leading-10': { 'line-height': '2.5rem' }, 'leading-none': { 'line-height': '1' }, 'leading-tight': { 'line-height': '1.25' }, 'leading-snug': { 'line-height': '1.375' }, 'leading-normal': { 'line-height': '1.5' }, 'leading-relaxed': { 'line-height': '1.625' }, 'leading-loose': { 'line-height': '2' },
            'list-none': { 'list-style-type': 'none' }, 'list-disc': { 'list-style-type': 'disc' }, 'list-decimal': { 'list-style-type': 'decimal' }, 'list-inside': { 'list-style-position': 'inside' }, 'list-outside': { 'list-style-position': 'outside' },
            'text-left': { 'text-align': 'left' }, 'text-center': { 'text-align': 'center' }, 'text-right': { 'text-align': 'right' }, 'text-justify': { 'text-align': 'justify' }, 'text-start': { 'text-align': 'start' }, 'text-end': { 'text-align': 'end' },
            'text-white': { 'color': '#ffffff' }, 'text-black': { 'color': '#000000' }, 'text-transparent': { 'color': 'transparent' },
            'underline': { 'text-decoration-line': 'underline' }, 'overline': { 'text-decoration-line': 'overline' }, 'line-through': { 'text-decoration-line': 'line-through' }, 'no-underline': { 'text-decoration-line': 'none' },
            'decoration-solid': { 'text-decoration-style': 'solid' }, 'decoration-double': { 'text-decoration-style': 'double' }, 'decoration-dotted': { 'text-decoration-style': 'dotted' }, 'decoration-dashed': { 'text-decoration-style': 'dashed' }, 'decoration-wavy': { 'text-decoration-style': 'wavy' },
            'decoration-auto': { 'text-decoration-thickness': 'auto' }, 'decoration-from-font': { 'text-decoration-thickness': 'from-font' }, ...Object.fromEntries([0,1,2,4,8].map(i => [`decoration-${i}`, {'text-decoration-thickness': `${i}px`}])),
            ...Object.fromEntries([0,1,2,4,8].map(i => [`underline-offset-${i}`, {'text-underline-offset': `${i}px`}])), 'underline-offset-auto': { 'text-underline-offset': 'auto' },
            'uppercase': { 'text-transform': 'uppercase' }, 'lowercase': { 'text-transform': 'lowercase' }, 'capitalize': { 'text-transform': 'capitalize' }, 'normal-case': { 'text-transform': 'none' },
            'truncate': { 'overflow': 'hidden', 'text-overflow': 'ellipsis', 'white-space': 'nowrap' }, 'text-ellipsis': { 'text-overflow': 'ellipsis' }, 'text-clip': { 'text-overflow': 'clip' },
            'text-wrap': { 'text-wrap': 'wrap' }, 'text-nowrap': { 'text-wrap': 'nowrap' }, 'text-balance': { 'text-wrap': 'balance' },
            'indent-px': {'text-indent': '1px'}, ...genSpacing('indent', 'text-indent'),
            'align-baseline': { 'vertical-align': 'baseline' }, 'align-top': { 'vertical-align': 'top' }, 'align-middle': { 'vertical-align': 'middle' }, 'align-bottom': { 'vertical-align': 'bottom' }, 'align-text-top': { 'vertical-align': 'text-top' }, 'align-text-bottom': { 'vertical-align': 'text-bottom' }, 'align-sub': { 'vertical-align': 'sub' }, 'align-super': { 'vertical-align': 'super' },
            'whitespace-normal': { 'white-space': 'normal' }, 'whitespace-nowrap': { 'white-space': 'nowrap' }, 'whitespace-pre': { 'white-space': 'pre' }, 'whitespace-pre-line': { 'white-space': 'pre-line' }, 'whitespace-pre-wrap': { 'white-space': 'pre-wrap' }, 'whitespace-break-spaces': {'white-space': 'break-spaces'},
            'break-normal': { 'overflow-wrap': 'normal', 'word-break': 'normal' }, 'break-words': { 'overflow-wrap': 'break-word' }, 'break-all': { 'word-break': 'break-all' }, 'break-keep': { 'word-break': 'keep-all' },
            'content-none': { 'content': 'none' },

            // --- Backgrounds ---
            'bg-fixed': { 'background-attachment': 'fixed' }, 'bg-local': { 'background-attachment': 'local' }, 'bg-scroll': { 'background-attachment': 'scroll' },
            'bg-clip-border': { 'background-clip': 'border-box' }, 'bg-clip-padding': { 'background-clip': 'padding-box' }, 'bg-clip-content': { 'background-clip': 'content-box' }, 'bg-clip-text': { 'background-clip': 'text' },
            'bg-bottom': { 'background-position': 'bottom' }, 'bg-center': { 'background-position': 'center' }, 'bg-left': { 'background-position': 'left' }, 'bg-left-bottom': { 'background-position': 'left bottom' }, 'bg-left-top': { 'background-position': 'left top' }, 'bg-right': { 'background-position': 'right' }, 'bg-right-bottom': { 'background-position': 'right bottom' }, 'bg-right-top': { 'background-position': 'right top' }, 'bg-top': { 'background-position': 'top' },
            'bg-repeat': { 'background-repeat': 'repeat' }, 'bg-no-repeat': { 'background-repeat': 'no-repeat' }, 'bg-repeat-x': { 'background-repeat': 'repeat-x' }, 'bg-repeat-y': { 'background-repeat': 'repeat-y' }, 'bg-repeat-round': { 'background-repeat': 'round' }, 'bg-repeat-space': { 'background-repeat': 'space' },
            'bg-auto': { 'background-size': 'auto' }, 'bg-cover': { 'background-size': 'cover' }, 'bg-contain': { 'background-size': 'contain' },
            'bg-none': { 'background-image': 'none' },
            'bg-gradient-to-t': { 'background-image': 'linear-gradient(to top, var(--tw-gradient-stops))' }, 'bg-gradient-to-tr': { 'background-image': 'linear-gradient(to top right, var(--tw-gradient-stops))' }, 'bg-gradient-to-r': { 'background-image': 'linear-gradient(to right, var(--tw-gradient-stops))' }, 'bg-gradient-to-br': { 'background-image': 'linear-gradient(to bottom right, var(--tw-gradient-stops))' }, 'bg-gradient-to-b': { 'background-image': 'linear-gradient(to bottom, var(--tw-gradient-stops))' }, 'bg-gradient-to-bl': { 'background-image': 'linear-gradient(to bottom left, var(--tw-gradient-stops))' }, 'bg-gradient-to-l': { 'background-image': 'linear-gradient(to left, var(--tw-gradient-stops))' }, 'bg-gradient-to-tl': { 'background-image': 'linear-gradient(to top left, var(--tw-gradient-stops))' },
            'bg-white': { 'background-color': '#ffffff' }, 'bg-black': { 'background-color': '#000000' }, 'bg-transparent': { 'background-color': 'transparent' },

            // --- Borders ---
            ...Object.fromEntries(['', '-sm', '-md', '-lg', '-xl', '-2xl', '-3xl', '-full'].map(s => {
                const size = { '': '0.25rem', '-sm': '0.125rem', '-md': '0.375rem', '-lg': '0.5rem', '-xl': '0.75rem', '-2xl': '1rem', '-3xl': '1.5rem', '-full': '9999px' }[s];
                return [`rounded${s}`, { 'border-radius': size }];
            })), 'rounded-none': { 'border-radius': '0px' },
            ...Object.fromEntries([0, 1, 2, 4, 8].map(i => [`border-${i}`, { 'border-width': `${i}px` }])), 'border': { 'border-width': '1px' }, 'border-px': { 'border-width': '1px' },
            ...Object.fromEntries([0, 1, 2, 4, 8].map(i => [`border-x-${i}`, { 'border-left-width': `${i}px`, 'border-right-width': `${i}px` }])), 'border-x': { 'border-left-width': '1px', 'border-right-width': '1px' },
            ...Object.fromEntries([0, 1, 2, 4, 8].map(i => [`border-y-${i}`, { 'border-top-width': `${i}px`, 'border-bottom-width': `${i}px` }])), 'border-y': { 'border-top-width': '1px', 'border-bottom-width': '1px' },
            ...Object.fromEntries([0, 1, 2, 4, 8].map(i => [`border-t-${i}`, { 'border-top-width': `${i}px` }])), 'border-t': { 'border-top-width': '1px' },
            ...Object.fromEntries([0, 1, 2, 4, 8].map(i => [`border-r-${i}`, { 'border-right-width': `${i}px` }])), 'border-r': { 'border-right-width': '1px' },
            ...Object.fromEntries([0, 1, 2, 4, 8].map(i => [`border-b-${i}`, { 'border-bottom-width': `${i}px` }])), 'border-b': { 'border-bottom-width': '1px' },
            ...Object.fromEntries([0, 1, 2, 4, 8].map(i => [`border-l-${i}`, { 'border-left-width': `${i}px` }])), 'border-l': { 'border-left-width': '1px' },
            'border-solid': { 'border-style': 'solid' }, 'border-dashed': { 'border-style': 'dashed' }, 'border-dotted': { 'border-style': 'dotted' }, 'border-double': { 'border-style': 'double' }, 'border-hidden': { 'border-style': 'hidden' }, 'border-none': { 'border-style': 'none' },
            'border-white': { 'border-color': '#ffffff' }, 'border-black': { 'border-color': '#000000' }, 'border-transparent': { 'border-color': 'transparent' },
            
            // --- Rings ---
            ...Object.fromEntries([0, 1, 2, 4, 8].map(i => [`ring-${i}`, { '--tw-ring-offset-shadow': `var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)`, '--tw-ring-shadow': `var(--tw-ring-inset) 0 0 0 calc(${i}px + var(--tw-ring-offset-width)) var(--tw-ring-color)`, 'box-shadow': 'var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)', 'border-color': 'transparent' }])), 'ring': { '--tw-ring-offset-shadow': `var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)`, '--tw-ring-shadow': `var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color)`, 'box-shadow': 'var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)', 'border-color': 'transparent' },
            'ring-inset': { '--tw-ring-inset': 'inset' },
            
            // --- Effects ---
            'shadow-sm': { 'box-shadow': '0 1px 2px 0 rgb(0 0 0 / 0.05)' }, 'shadow': { 'box-shadow': '0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)' }, 'shadow-md': { 'box-shadow': '0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)' }, 'shadow-lg': { 'box-shadow': '0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)' }, 'shadow-xl': { 'box-shadow': '0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)' }, 'shadow-2xl': { 'box-shadow': '0 25px 50px -12px rgb(0 0 0 / 0.25)' }, 'shadow-inner': { 'box-shadow': 'inset 0 2px 4px 0 rgb(0 0 0 / 0.05)' }, 'shadow-none': { 'box-shadow': 'none' },
            ...Object.fromEntries(Array.from({ length: 21 }, (_, i) => [i * 5, (i * 0.05).toFixed(2)]).map(([k, v]) => [`opacity-${k}`, { opacity: v }])),
            'mix-blend-normal': { 'mix-blend-mode': 'normal' }, 'mix-blend-multiply': { 'mix-blend-mode': 'multiply' }, 'mix-blend-screen': { 'mix-blend-mode': 'screen' }, 'mix-blend-overlay': { 'mix-blend-mode': 'overlay' }, 'mix-blend-darken': { 'mix-blend-mode': 'darken' }, 'mix-blend-lighten': { 'mix-blend-mode': 'lighten' }, 'mix-blend-color-dodge': { 'mix-blend-mode': 'color-dodge' }, 'mix-blend-color-burn': { 'mix-blend-mode': 'color-burn' }, 'mix-blend-hard-light': { 'mix-blend-mode': 'hard-light' }, 'mix-blend-soft-light': { 'mix-blend-mode': 'soft-light' }, 'mix-blend-difference': { 'mix-blend-mode': 'difference' }, 'mix-blend-exclusion': { 'mix-blend-mode': 'exclusion' }, 'mix-blend-hue': { 'mix-blend-mode': 'hue' }, 'mix-blend-saturation': { 'mix-blend-mode': 'saturation' }, 'mix-blend-color': { 'mix-blend-mode': 'color' }, 'mix-blend-luminosity': { 'mix-blend-mode': 'luminosity' }, 'mix-blend-plus-lighter': { 'mix-blend-mode': 'plus-lighter' },
            
            // --- Filters ---
            'blur-none': { 'filter': 'blur(0)' }, 'blur-sm': { 'filter': 'blur(4px)' }, 'blur': { 'filter': 'blur(8px)' }, 'blur-md': { 'filter': 'blur(12px)' }, 'blur-lg': { 'filter': 'blur(16px)' }, 'blur-xl': { 'filter': 'blur(24px)' }, 'blur-2xl': { 'filter': 'blur(40px)' }, 'blur-3xl': { 'filter': 'blur(64px)' },
            ...Object.fromEntries([0, 50, 75, 90, 95, 100, 105, 110, 125, 150, 200].map(v => [`brightness-${v}`, { 'filter': `brightness(.${v})` }])),
            ...Object.fromEntries([0, 50, 75, 90, 95, 100, 105, 110, 125, 150, 200].map(v => [`contrast-${v}`, { 'filter': `contrast(.${v})` }])),
            'drop-shadow-sm': { 'filter': 'drop-shadow(0 1px 1px rgb(0 0 0 / 0.05))' }, 'drop-shadow': { 'filter': 'drop-shadow(0 1px 2px rgb(0 0 0 / 0.1)) drop-shadow(0 1px 1px rgb(0 0 0 / 0.06))' }, 'drop-shadow-md': { 'filter': 'drop-shadow(0 4px 3px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 2px rgb(0 0 0 / 0.06))' }, 'drop-shadow-lg': { 'filter': 'drop-shadow(0 10px 8px rgb(0 0 0 / 0.04)) drop-shadow(0 4px 3px rgb(0 0 0 / 0.1))' }, 'drop-shadow-xl': { 'filter': 'drop-shadow(0 20px 13px rgb(0 0 0 / 0.03)) drop-shadow(0 8px 5px rgb(0 0 0 / 0.08))' }, 'drop-shadow-2xl': { 'filter': 'drop-shadow(0 25px 25px rgb(0 0 0 / 0.15))' }, 'drop-shadow-none': { 'filter': 'drop-shadow(0 0 #0000)' },
            ...Object.fromEntries([0, 100].map(v => [`grayscale-${v}`, { 'filter': `grayscale(${v}%)` }])),
            ...Object.fromEntries([0, 50, 75, 90, 95, 100, 105, 110, 125, 150, 200].map(v => [`saturate-${v}`, { 'filter': `saturate(.${v})` }])),
            'backdrop-blur-none': { 'backdrop-filter': 'blur(0)' }, 'backdrop-blur-sm': { 'backdrop-filter': 'blur(4px)' }, 'backdrop-blur': { 'backdrop-filter': 'blur(8px)' }, 'backdrop-blur-md': { 'backdrop-filter': 'blur(12px)' }, 'backdrop-blur-lg': { 'backdrop-filter': 'blur(16px)' }, 'backdrop-blur-xl': { 'backdrop-filter': 'blur(24px)' }, 'backdrop-blur-2xl': { 'backdrop-filter': 'blur(40px)' }, 'backdrop-blur-3xl': { 'backdrop-filter': 'blur(64px)' },
            
            // --- Tables ---
            'border-collapse': { 'border-collapse': 'collapse' }, 'border-separate': { 'border-collapse': 'separate' },
            ...genXYSpacing('border-spacing', '--tw-border-spacing-x', '--tw-border-spacing-y'), ...genSpacing('border-spacing-x', '--tw-border-spacing-x'), ...genSpacing('border-spacing-y', '--tw-border-spacing-y'),
            'table-auto': { 'table-layout': 'auto' }, 'table-fixed': { 'table-layout': 'fixed' },

            // --- Transitions & Animation ---
            'transition-none': { 'transition-property': 'none' }, 'transition-all': { 'transition-property': 'all', 'transition-timing-function': 'cubic-bezier(0.4, 0, 0.2, 1)', 'transition-duration': '150ms' }, 'transition': { 'transition-property': 'color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter', 'transition-timing-function': 'cubic-bezier(0.4, 0, 0.2, 1)', 'transition-duration': '150ms' }, 'transition-colors': { 'transition-property': 'color, background-color, border-color, text-decoration-color, fill, stroke', 'transition-timing-function': 'cubic-bezier(0.4, 0, 0.2, 1)', 'transition-duration': '150ms' }, 'transition-opacity': { 'transition-property': 'opacity', 'transition-timing-function': 'cubic-bezier(0.4, 0, 0.2, 1)', 'transition-duration': '150ms' }, 'transition-shadow': { 'transition-property': 'box-shadow', 'transition-timing-function': 'cubic-bezier(0.4, 0, 0.2, 1)', 'transition-duration': '150ms' }, 'transition-transform': { 'transition-property': 'transform', 'transition-timing-function': 'cubic-bezier(0.4, 0, 0.2, 1)', 'transition-duration': '150ms' },
            ...Object.fromEntries([75, 100, 150, 200, 300, 500, 700, 1000].map(d => [`duration-${d}`, { 'transition-duration': `${d}ms` }])),
            'ease-linear': { 'transition-timing-function': 'linear' }, 'ease-in': { 'transition-timing-function': 'cubic-bezier(0.4, 0, 1, 1)' }, 'ease-out': { 'transition-timing-function': 'cubic-bezier(0, 0, 0.2, 1)' }, 'ease-in-out': { 'transition-timing-function': 'cubic-bezier(0.4, 0, 0.2, 1)' },
            ...Object.fromEntries([0, 75, 100, 150, 200, 300, 500, 700, 1000].map(d => [`delay-${d}`, { 'transition-delay': `${d}ms` }])),
            'animate-none': { 'animation': 'none' }, 'animate-spin': { 'animation': 'spin 1s linear infinite' }, 'animate-ping': { 'animation': 'ping 1s cubic-bezier(0, 0, 0.2, 1) infinite' }, 'animate-pulse': { 'animation': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite' }, 'animate-bounce': { 'animation': 'bounce 1s infinite' },

            // --- Transforms ---
            'transform': { 'transform': 'translate(var(--tw-translate-x, 0), var(--tw-translate-y, 0)) rotate(var(--tw-rotate, 0)) skewX(var(--tw-skew-x, 0)) skewY(var(--tw-skew-y, 0)) scaleX(var(--tw-scale-x, 1)) scaleY(var(--tw-scale-y, 1))' },
            'transform-gpu': { 'transform': 'translate3d(var(--tw-translate-x, 0), var(--tw-translate-y, 0), 0) rotate(var(--tw-rotate, 0)) skewX(var(--tw-skew-x, 0)) skewY(var(--tw-skew-y, 0)) scaleX(var(--tw-scale-x, 1)) scaleY(var(--tw-scale-y, 1))' },
            'transform-none': { 'transform': 'none' },
            ...Object.fromEntries([0, 50, 75, 90, 95, 100, 105, 110, 125, 150].map(s => [`scale-${s}`, { '--tw-scale-x': `${s/100}`, '--tw-scale-y': `${s/100}` }])),
            ...Object.fromEntries([0, 1, 2, 3, 6, 12, 45, 90, 180].map(r => [`rotate-${r}`, { '--tw-rotate': `${r}deg` }])),
            ...Object.fromEntries([0, 1, 2, 3, 6, 12].map(s => [`skew-x-${s}`, { '--tw-skew-x': `${s}deg` }])), ...Object.fromEntries([0, 1, 2, 3, 6, 12].map(s => [`skew-y-${s}`, { '--tw-skew-y': `${s}deg` }])),
            'origin-center': { 'transform-origin': 'center' }, 'origin-top': { 'transform-origin': 'top' }, 'origin-top-right': { 'transform-origin': 'top right' }, 'origin-right': { 'transform-origin': 'right' }, 'origin-bottom-right': { 'transform-origin': 'bottom right' }, 'origin-bottom': { 'transform-origin': 'bottom' }, 'origin-bottom-left': { 'transform-origin': 'bottom left' }, 'origin-left': { 'transform-origin': 'left' }, 'origin-top-left': { 'transform-origin': 'top left' },
            
            // --- Interactivity ---
            'accent-auto': { 'accent-color': 'auto' },
            'appearance-none': { 'appearance': 'none' },
            'cursor-auto': { 'cursor': 'auto' }, 'cursor-default': { 'cursor': 'default' }, 'cursor-pointer': { 'cursor': 'pointer' }, 'cursor-wait': { 'cursor': 'wait' }, 'cursor-text': { 'cursor': 'text' }, 'cursor-move': { 'cursor': 'move' }, 'cursor-help': { 'cursor': 'help' }, 'cursor-not-allowed': { 'cursor': 'not-allowed' }, 'cursor-none': { 'cursor': 'none' }, 'cursor-context-menu': { 'cursor': 'context-menu' }, 'cursor-progress': { 'cursor': 'progress' }, 'cursor-cell': { 'cursor': 'cell' }, 'cursor-crosshair': { 'cursor': 'crosshair' }, 'cursor-vertical-text': { 'cursor': 'vertical-text' }, 'cursor-alias': { 'cursor': 'alias' }, 'cursor-copy': { 'cursor': 'copy' }, 'cursor-no-drop': { 'cursor': 'no-drop' }, 'cursor-grab': { 'cursor': 'grab' }, 'cursor-grabbing': { 'cursor': 'grabbing' },
            'pointer-events-none': { 'pointer-events': 'none' }, 'pointer-events-auto': { 'pointer-events': 'auto' },
            'resize-none': { 'resize': 'none' }, 'resize-y': { 'resize': 'vertical' }, 'resize-x': { 'resize': 'horizontal' }, 'resize': { 'resize': 'both' },
            'scroll-auto': { 'scroll-behavior': 'auto' }, 'scroll-smooth': { 'scroll-behavior': 'smooth' },
            ...genSpacing('scroll-m', 'scroll-margin'), ...genXYSpacing('scroll-mx', 'scroll-margin-left', 'scroll-margin-right'), ...genXYSpacing('scroll-my', 'scroll-margin-top', 'scroll-margin-bottom'), ...genSpacing('scroll-mt', 'scroll-margin-top'), ...genSpacing('scroll-mr', 'scroll-margin-right'), ...genSpacing('scroll-mb', 'scroll-margin-bottom'), ...genSpacing('scroll-ml', 'scroll-margin-left'),
            ...genSpacing('scroll-p', 'scroll-padding'), ...genXYSpacing('scroll-px', 'scroll-padding-left', 'scroll-padding-right'), ...genXYSpacing('scroll-py', 'scroll-padding-top', 'scroll-padding-bottom'), ...genSpacing('scroll-pt', 'scroll-padding-top'), ...genSpacing('scroll-pr', 'scroll-padding-right'), ...genSpacing('scroll-pb', 'scroll-padding-bottom'), ...genSpacing('scroll-pl', 'scroll-padding-left'),
            'snap-start': { 'scroll-snap-align': 'start' }, 'snap-end': { 'scroll-snap-align': 'end' }, 'snap-center': { 'scroll-snap-align': 'center' }, 'snap-align-none': { 'scroll-snap-align': 'none' },
            'snap-normal': { 'scroll-snap-stop': 'normal' }, 'snap-always': { 'scroll-snap-stop': 'always' },
            'snap-none': { 'scroll-snap-type': 'none' }, 'snap-x': { 'scroll-snap-type': 'x var(--tw-scroll-snap-strictness)' }, 'snap-y': { 'scroll-snap-type': 'y var(--tw-scroll-snap-strictness)' }, 'snap-both': { 'scroll-snap-type': 'both var(--tw-scroll-snap-strictness)' },
            'snap-mandatory': { '--tw-scroll-snap-strictness': 'mandatory' }, 'snap-proximity': { '--tw-scroll-snap-strictness': 'proximity' },
            'touch-auto': { 'touch-action': 'auto' }, 'touch-none': { 'touch-action': 'none' }, 'touch-pan-x': { 'touch-action': 'pan-x' }, 'touch-pan-left': { 'touch-action': 'pan-left' }, 'touch-pan-right': { 'touch-action': 'pan-right' }, 'touch-pan-y': { 'touch-action': 'pan-y' }, 'touch-pan-up': { 'touch-action': 'pan-up' }, 'touch-pan-down': { 'touch-action': 'pan-down' }, 'touch-pinch-zoom': { 'touch-action': 'pinch-zoom' }, 'touch-manipulation': { 'touch-action': 'manipulation' },
            'select-none': { 'user-select': 'none' }, 'select-text': { 'user-select': 'text' }, 'select-all': { 'user-select': 'all' }, 'select-auto': { 'user-select': 'auto' },
            'will-change-auto': { 'will-change': 'auto' }, 'will-change-scroll': { 'will-change': 'scroll-position' }, 'will-change-contents': { 'will-change': 'contents' }, 'will-change-transform': { 'will-change': 'transform' },

            // --- SVG ---
            ...Object.fromEntries([0, 1, 2].map(i => [`stroke-${i}`, { 'stroke-width': i }])),
        };

        const sampleHtml = `<body class="p-8 bg-slate-900">
  <a href="#" class="text-center rounded-lg px-4 py-2 bg-indigo-500/10 text-indigo-400 ring-1 ring-inset ring-indigo-500/20">
    <span class="sr-only">Link to somewhere</span>
    Click Me
  </a>
  <style>
    .custom-class { color: hotpink; }
  </style>
</body>`;
        
        const htmlInput = document.getElementById('html-input');
        const jsonOutput = document.getElementById('json-output');
        const outputPlaceholder = document.getElementById('output-placeholder');
        const convertBtn = document.getElementById('convert-btn');
        const copyBtn = document.getElementById('copy-btn');
        const pasteSampleBtn = document.getElementById('paste-sample-btn');
        const pasteFromClipboardBtn = document.getElementById('paste-from-clipboard-btn');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');

        /**
         * Converts a hex color string to an rgba string.
         * @param {string} hex - The hex color (e.g., '#RRGGBB').
         * @param {number} alpha - The alpha value (0 to 1).
         * @returns {string|null} - The rgba string or null if hex is invalid.
         */
        function hexToRgba(hex, alpha) {
            if (!/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) return null;
            let c = hex.substring(1).split('');
            if (c.length === 3) {
                c = [c[0], c[0], c[1], c[1], c[2], c[2]];
            }
            c = '0x' + c.join('');
            return `rgba(${[(c>>16)&255, (c>>8)&255, c&255].join(',')},${alpha})`;
        }
        
        function parseTailwind(classString) {
            const style = {};
            const variants = [];
            const groupedVariants = {};

            const classes = classString.split(/\s+/).filter(c => c);
            
            const responsivePrefixes = { 'sm': '40rem', 'md': '48rem', 'lg': '64rem', 'xl': '80rem', '2xl': '96rem' };
            const statePrefixes = ['hover', 'focus', 'active', 'dark', 'disabled', 'placeholder', 'first', 'last', 'odd', 'even', 'visited', 'checked', 'focus-within', 'focus-visible'];
            const arbitraryValueRegex = /(.+?)-\[(.+)\]/;

            for (let className of classes) {
                let isImportant = false;
                if (className.startsWith('!')) {
                    isImportant = true;
                    className = className.substring(1);
                }

                const parts = className.split(':');
                let baseClass = parts.pop();
                const prefixes = parts.sort();
                const variantKey = prefixes.join(':');

                let css = {};
                
                // Handle opacity modifier like 'bg-indigo-500/10'
                if (baseClass.includes('/') && !baseClass.startsWith('[')) {
                    const [classWithoutAlpha, alpha] = baseClass.split('/');
                    const colorUtility = tailwindMap[classWithoutAlpha];
                    if (colorUtility) {
                        const cssProp = Object.keys(colorUtility)[0];
                        const hexColor = colorUtility[cssProp];
                        const alphaValue = parseInt(alpha, 10) / 100;
                        const rgbaColor = hexToRgba(hexColor, alphaValue);
                        if(rgbaColor) {
                           css[cssProp] = rgbaColor;
                        }
                    }
                } else {
                     const match = baseClass.match(arbitraryValueRegex);
                     if (match) {
                        const prop = match[1];
                        const value = match[2].replace(/_/g, ' ');
                        const cssPropMap = { 'bg': 'background-color', 'w': 'width', 'h': 'height', 'p': 'padding', 'm': 'margin', 'text': 'color', 'border': 'border-color' };
                        const cssProp = cssPropMap[prop] || prop;
                        css[cssProp] = value;
                    } else if (tailwindMap[baseClass]) {
                        css = { ...tailwindMap[baseClass] };
                    } else {
                        continue; 
                    }
                }

                if (Object.keys(css).length === 0) continue;

                if (isImportant) {
                    Object.keys(css).forEach(key => css[key] = `${css[key]} !important`);
                }

                if (!variantKey) {
                    Object.assign(style, css);
                } else {
                    if (!groupedVariants[variantKey]) groupedVariants[variantKey] = {};
                    Object.assign(groupedVariants[variantKey], css);
                }
            }
            
            for (const key in groupedVariants) {
                const variant = { style: groupedVariants[key] };
                const prefixes = key.split(':');
                prefixes.forEach(prefix => {
                    if (responsivePrefixes[prefix]) {
                        variant.mediaQuery = { 'min-width': responsivePrefixes[prefix] };
                    } else if (statePrefixes.includes(prefix)) {
                        variant[prefix] = true;
                    }
                });
                variants.push(variant);
            }

            return { style, variants };
        }

        function processNode(domNode, nodes) {
            if ((domNode.nodeType === 3 && !domNode.nodeValue.trim()) || domNode.nodeType === 8) {
                return null;
            }

            const id = crypto.randomUUID();
            let nodeData;
            const tagName = domNode.tagName ? domNode.tagName.toLowerCase() : null;

            if (domNode.nodeType === 1) { // Element node
                // Handle <style> tag separately
                if (tagName === 'style') {
                    nodeData = {
                        type: 'element',
                        tag: 'style',
                        attrs: {},
                        children: []
                    };
                    const styleContent = domNode.innerHTML;
                    if (styleContent) {
                        const textNodeId = crypto.randomUUID();
                        nodes[textNodeId] = { type: 'text', value: { type: 'value', value: styleContent } };
                        nodeData.children.push(textNodeId);
                    }
                    nodes[id] = nodeData;
                    return id;
                }
                
                const classNameString = (typeof domNode.className === 'object' && domNode.className.baseVal !== undefined)
                    ? domNode.className.baseVal
                    : domNode.className;

                const { style, variants } = parseTailwind(classNameString || '');
                
                const defaultStyles = { 'flex-direction': 'row', 'display': 'block', 'border-style': 'solid', 'border-width': '0' };
                
                nodeData = {
                    type: 'element',
                    tag: tagName === 'body' ? 'div' : tagName, // Convert body to div
                    classes: {},
                    attrs: {},
                    events: {},
                    style: {...defaultStyles, ...style},
                    styleVariables: {},
                    variants: variants,
                    children: []
                };

                for (const attr of domNode.attributes) {
                    if (attr.name !== 'class' && attr.name !== 'style') {
                        nodeData.attrs[attr.name] = { type: 'value', value: attr.value };
                    }
                }
                
                if (domNode.style && domNode.style.cssText) {
                    const inlineStyles = domNode.style.cssText.split(';').filter(s => s.trim());
                    inlineStyles.forEach(s => {
                        const [key, value] = s.split(':').map(p => p.trim());
                        if (key && value) nodeData.style[key] = value;
                    });
                }
                
                for (const child of domNode.childNodes) {
                    const childId = processNode(child, nodes);
                    if (childId) nodeData.children.push(childId);
                }

            } else if (domNode.nodeType === 3) { // Text node
                nodeData = { type: 'text', value: { type: 'value', value: domNode.nodeValue.trim() } };
            }
            
            if (nodeData) {
                nodes[id] = nodeData;
                return id;
            }
            return null;
        }

        function convert() {
            const html = htmlInput.value;
            if (!html.trim()) {
                jsonOutput.textContent = '';
                outputPlaceholder.style.display = 'flex';
                return;
            }

            try {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // If the user pastes a full HTML document, start from body. Otherwise, create a wrapper.
                let rootElement = doc.body;
                if (!doc.body.firstElementChild && doc.head.firstElementChild) {
                    // Handle case where content is in head
                    rootElement = doc.head;
                } else if (doc.body.children.length === 1 && doc.body.firstElementChild.tagName !== 'STYLE' && doc.body.firstElementChild.tagName !== 'SCRIPT') {
                    // If there's a single element in the body, use it as the root
                    rootElement = doc.body.firstElementChild;
                } else {
                    // Otherwise, process the whole body as a fragment
                    const tempWrapper = document.createElement('div');
                    Array.from(doc.body.childNodes).forEach(child => tempWrapper.appendChild(child.cloneNode(true)));
                    rootElement = tempWrapper;
                }

                const nodes = {};
                const rootId = processNode(rootElement, nodes);
                
                if (rootId) {
                    const rootNodeData = nodes[rootId];
                    delete nodes[rootId];
                    nodes['root'] = rootNodeData;
                }

                const finalJson = { type: 'nodes', nodes: nodes };
                jsonOutput.textContent = JSON.stringify(finalJson, null, 2);
                outputPlaceholder.style.display = 'none';

            } catch (error) {
                console.error("Conversion Error:", error);
                jsonOutput.textContent = JSON.stringify({ error: "Failed to parse HTML.", message: error.message }, null, 2);
                outputPlaceholder.style.display = 'none';
            }
        }
        
        function showToast(message, type = 'success') {
            toastMessage.textContent = message;
            toast.classList.remove('opacity-0');
            toast.className = toast.className.replace(/bg-(red|gray)-[0-9]+/g, '');
            toast.classList.add(type === 'error' ? 'bg-red-600' : 'bg-gray-800');
            setTimeout(() => toast.classList.add('opacity-0'), 2500);
        }

        // --- Event Listeners ---
        convertBtn.addEventListener('click', convert);
        
        pasteSampleBtn.addEventListener('click', () => {
            htmlInput.value = sampleHtml;
            convert();
        });
        
        pasteFromClipboardBtn.addEventListener('click', async () => {
            try {
                const text = await navigator.clipboard.readText();
                if (text) {
                    htmlInput.value = text;
                    showToast("Pasted from clipboard!");
                    convert();
                } else {
                    showToast("Clipboard is empty.", "error");
                }
            } catch (err) {
                console.error('Failed to read clipboard contents: ', err);
                showToast("Could not access clipboard.", "error");
            }
        });

        copyBtn.addEventListener('click', () => {
            if (jsonOutput.textContent) {
                navigator.clipboard.writeText(jsonOutput.textContent).then(() => {
                    showToast("Copied to clipboard!");
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    showToast("Failed to copy.", "error");
                });
            }
        });
        
        // Initial conversion on load
        pasteSampleBtn.click();
    </script>
</body>
</html>